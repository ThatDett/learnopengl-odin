# https://taskfile.dev

version: '3'

vars:
  flags:
    "
    -define:print_fps=false
    -define:show_diagnostics=false
    -define:shader_diagnostics=true
    -o:none
    -collection:dependencies=dependencies
    -extra-linker-flags:dependencies/assimp/lib/assimp-vc143-mt.lib
    "

  build_command: "build src -out:bin/out.exe {{.flags}}" 

tasks:
  build:
    cmds:
      - odin {{.build_command}}
    sources:
      - Taskfile.yaml
      - src/**/*.odin
      - dependencies/**/*.odin
    silent: true
  
  debug:
    cmds:
      - odin {{.build_command}} -debug
    silent: true
    
  run:
    deps:
      - build
    cmds:
      - ./bin/out.exe
    silent: true

